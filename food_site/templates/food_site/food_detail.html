{% extends 'food_site/food_base.html' %}

{% block food-content %}


<div style="margin: 10px">
    {% if food.image %}
        <img src="{{ food.image.url }}">
    {% endif %}
    <div style="position:absolute; margin-left:350px; margin-top: -170px">
        <p>Категория: {{ food.category }}</p>
        <p>Автор: {{ food.author }}</p>
        {% if food.time_cook == 0 %}
            <p>Время готовки: Не указано</p>
        {% else %}
            <p>Время готовки: {{ food.time_cook }}</p>
        {% endif %}
        <p>Порций: {{ food.portion }}</p>
    </div>
    <h5 style="margin:10px"><a>{{ food.title }}</a></h5><hr>
    <p>{{ food.description }}</p><hr>
    <h5>Продукты:</h5>
    <p>{{ food.products | linebreaks }}</p>
    <div style="margin:20px;">
        {% if steps %}
            <div>
            {% for step in steps %}
                <img src="{{ step.image.url }}" width="25%">
                <div style="margin-left: 30px; width:60%; display: inline-flex;">
                    <a>{{ step.text }}</a>
                </div>
                <hr>
            {% endfor %}
            </div>
        {% endif %}
    </div>
    {% if request.user.username == food.author.username %}
        <div style="float:right; margin:15px">
            <button type="submit" onclick="location.href='{% url 'food:food_edit' food.pk %}'">Редактировать</button>
            <button type="submit" onclick="location.href='{% url 'food:food_delete' food.pk %}'">Удалить</button>
        </div>
    {% endif %}
</div>

<div style="margin-left: 500px;">
    Понравилось:
    <img src="/media/img/like.png" width="6%" onclick="location.href='{% url 'food:add_like' food.pk %}'">
    {{ food.likes.count }}
</div>

<div style="margin:10px; background:#a3cff7">
    <h3>Комментарии:</h3>
    <hr>

    <div>
        <h5>Оставить комментарий:</h5>
        <form method="post">
            {% csrf_token %}
            <table>
                {{ comments_form.as_table }}
            </table>
            <input type="submit" value="Добавить" style="margin:5px">
        </form>
        <hr>
    </div>

    {% for comment in comments %}
    <div style="margin:10px">
        <p> <img src="{{ comment.author.profile.image.url }}" width="5%">
            {{ comment.author }} | {{ comment.date_created }}</p>
        <p style="margin-left:10px">{{ comment.text | linebreaks }}</p>
    </div>
    <div style="margin:10px">
        {% if request.user.username == comment.author.username %}
        <button onclick="location.href='{% url 'food:comment_delete' comment.pk %}'">Удалить</button>
        {% endif %}
    </div>
    <hr>
    {% endfor %}
</div>


{% endblock food-content %}


